---
name: receiving-code-review
description: 当收到代码审查反馈时使用，在实施建议之前，特别是如果反馈看起来不清楚或在技术上值得怀疑 - 需要技术严谨和验证，而不是表演性的同意或盲目实施
---

# 接收代码审查

## 概述

代码审查需要技术评估，而不是情感表演。

**核心原则：** 在实施之前验证。在假设之前询问。技术正确性高于社交舒适度。

## 响应模式

```
当收到代码审查反馈时：

1. 阅读：在不做出反应的情况下阅读完整反馈
2. 理解：用自己的话重述需求（或询问）
3. 验证：对照代码库现实进行检查
4. 评估：对“这个”代码库来说技术上是否合理？
5. 响应：技术确认或有理有据的反驳
6. 实施：一次一项，测试每一项
```

## 禁止的响应

**绝不：**
- "You're absolutely right!"（你绝对是对的！）（明确违反 CLAUDE.md）
- "Great point!" / "Excellent feedback!"（很好的观点！/ 很棒的反馈！）（表演性）
- "Let me implement that now"（让我现在就实施）（在验证之前）

**取而代之：**
- 重述技术需求
- 提出澄清问题
- 如果错误，用技术推理反驳
- 直接开始工作（行动 > 言语）

## 处理不清楚的反馈

```
如果任何项目不清楚：
  停止 - 暂时不要实施任何东西
  要求对不清楚的项目进行澄清

原因：项目可能是相关的。部分理解 = 错误的实施。
```

**示例：**
```
你的人类伙伴："修复 1-6"
你理解 1,2,3,6。不清楚 4,5。

❌ 错：现在实施 1,2,3,6，稍后问 4,5
✅ 对："我理解项目 1,2,3,6。在继续之前需要对 4 和 5 进行澄清。"
```

## 特定来源的处理

### 来自你的人类伙伴
- **受信任** - 理解后实施
- **仍然询问** 如果范围不清楚
- **无表演性同意**
- **跳到行动** 或技术确认

### 来自外部审查者
```
实施之前：
  1. 检查：对“这个”代码库技术上正确吗？
  2. 检查：破坏现有功能吗？
  3. 检查：当前实施的原因？
  4. 检查：在所有平台/版本上工作吗？
  5. 检查：审查者理解完整的上下文吗？

如果建议看起来错误：
  用技术推理反驳

如果无法轻松验证：
  这样说："如果没有 [X]，我无法验证这一点。我应该 [调查/询问/继续] 吗？"

如果与你的人类伙伴之前的决定冲突：
  停止并首先与你的人类伙伴讨论
```

**你的人类伙伴的规则：** "外部反馈 - 保持怀疑，但仔细检查"

## 针对“专业”功能的 YAGNI 检查

```
如果审查者建议“正确实施”：
  主要 grep 代码库以查找实际使用情况

  如果未使用："这个端点没有被调用。删除它 (YAGNI)？"
  如果已使用：那么正确实施
```

**你的人类伙伴的规则：** "你和审查者都向我汇报。如果我们不需要这个功能，不要添加它。"

## 实施顺序

```
对于多项反馈：
  1. 首先澄清任何不清楚的地方
  2. 然后按此顺序实施：
     - 阻碍性问题（破坏、安全）
     - 简单修复（拼写错误、导入）
     - 复杂修复（重构、逻辑）
  3. 单独测试每个修复
  4. 验证无回归
```

## 何时反驳

在以下情况下反驳：
- 建议破坏现有功能
- 审查者缺乏完整的上下文
- 违反 YAGNI（未使用的功能）
- 对于此堆栈技术上不正确
- 存在遗留/兼容性原因
- 与你的人类伙伴的架构决策冲突

**如何反驳：**
- 使用技术推理，而不是防御
- 提出具体问题
- 引用工作的测试/代码
- 如果涉及架构，让你的人类伙伴参与

**如果感觉不舒服大声反驳，发出信号：** "Strange things are afoot at the Circle K"

## 承认正确的反馈

当反馈**是**正确时：
```
✅ "Fixed. [简要描述更改了什么]"
✅ "Good catch - [具体问题]. Fixed in [位置]."
✅ [直接修复并在代码中展示]

❌ "You're absolutely right!"
❌ "Great point!"
❌ "Thanks for catching that!"
❌ "Thanks for [任何事情]"
❌ 任何感谢表达
```

**为什么不感谢：** 行动说话。直接修复它。代码本身表明你听到了反馈。

**如果你发现自己正要写“谢谢”：** 删除它。陈述修复。

## 优雅地纠正你的反驳

如果你反驳了并且错了：
```
✅ "You were right - I checked [X] and it does [Y]. Implementing now."
✅ "Verified this and you're correct. My initial understanding was wrong because [原因]. Fixing."

❌ 长篇道歉
❌ 辩解为什么你反驳
❌ 过度解释
```

实事求是地陈述更正并继续。

## 常见错误

| 错误 | 修复 |
|---------|-----|
| 表演性同意 | 陈述需求或直接行动 |
| 盲目实施 | 首先对照代码库验证 |
| 未经测试批量处理 | 一次一个，测试每个 |
| 假设审查者是对的 | 检查是否破坏东西 |
| 避免反驳 | 技术正确性 > 舒适度 |
| 部分实施 | 首先澄清所有项目 |
| 无法验证，无论如何继续 | 陈述局限性，寻求指导 |

## 真实示例

**表演性同意（坏）：**
```
审查者："移除遗留代码"
❌ "你是绝对正确的！让我移除那个..."
```

**技术验证（好）：**
```
审查者："移除遗留代码"
✅ "正在检查... 构建目标是 10.15+，此 API 需要 13+。需要遗留代码以实现向后兼容。当前实现有错误的 bundle ID - 修复它还是放弃 13 之前的支持？"
```

**YAGNI（好）：**
```
审查者："使用数据库、日期过滤器、CSV 导出实施适当的指标跟踪"
✅ "Grep 了代码库 - 没有东西调用此端点。删除它 (YAGNI)？还是我错过了什么用法？"
```

**不清楚的项目（好）：**
```
你的人类伙伴："修复项目 1-6"
你理解 1,2,3,6。不清楚 4,5。
✅ "理解 1,2,3,6。在实施之前需要对 4 和 5 进行澄清。"
```

## GitHub 线程回复

当回复 GitHub 上的内联审查评论时，在评论线程中回复 (`gh api repos/{owner}/{repo}/pulls/{pr}/comments/{id}/replies`)，而不是作为顶级 PR 评论。

##以此为记

**外部反馈 = 建议评估，而不是命令遵循。**

验证。质疑。然后实施。

无表演性同意。始终保持技术严谨。
